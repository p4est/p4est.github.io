<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>p4est: userdata/userdata2.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">p4est
   &#160;<span id="projectnumber">2.8.7</span>
   </div>
   <div id="projectbrief">p4est is a software library for parallel adaptive mesh refinement.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">userdata/userdata2.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>A 2D example of managing application data: <b>main program</b>.The detailed code for the demonstration resides in <a class="el" href="userdata_2userdata_run2_8c-example.html">userdata/userdata_run2.c</a>.</p>
<p>The workflow is documented more extensively in <a class="el" href="example_userdata.html">A demonstration of how to manage application data</a>.</p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">  This file is part of p4est.</span></div>
<div class="line"><span class="comment">  p4est is a C library to manage a collection (a forest) of multiple</span></div>
<div class="line"><span class="comment">  connected adaptive quadtrees or octrees in parallel.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  Copyright (C) 2010 The University of Texas System</span></div>
<div class="line"><span class="comment">  Additional copyright (C) 2011 individual authors</span></div>
<div class="line"><span class="comment">  Written by Carsten Burstedde, Lucas C. Wilcox, and Tobin Isaac</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  p4est is free software; you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment">  it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment">  the Free Software Foundation; either version 2 of the License, or</span></div>
<div class="line"><span class="comment">  (at your option) any later version.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  p4est is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment">  GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment">  along with p4est; if not, write to the Free Software Foundation, Inc.,</span></div>
<div class="line"><span class="comment">  51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This example program demonstrates how to manage application data.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   p4est_userdata &lt;OPTIONS&gt; [&lt;configuration&gt; [&lt;level&gt;]]</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * The following options are recognized:</span></div>
<div class="line"><span class="comment"> *   --help          Display a usage and help message and exit successfully.</span></div>
<div class="line"><span class="comment"> *   --level         The level may alternatively be specified as an option.</span></div>
<div class="line"><span class="comment"> *                   The second command line argument takes precedence.</span></div>
<div class="line"><span class="comment"> *   --no-vtk        Do NOT write VTK files (default is ON).</span></div>
<div class="line"><span class="comment"> *   --no-int        Skip the part of the program with internal user data.</span></div>
<div class="line"><span class="comment"> *   --no-ext        Skip the part of the program with external user data.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Invalid options or arguments result in an error message and exit status.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="preprocessor">#ifndef P4_TO_P8</span></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>  *p4est_userdata_usage =</div>
<div class="line">  <span class="stringliteral">&quot;&lt;configuration&gt; is the first optional argument.\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;  The following values are legal (default is \&quot;unit\&quot;):\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;  o unit          Refinement on the unit square.\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;  o periodic      Unit square with all-periodic boundary conditions.\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;  o brick         Refinement on a 2x3 rectangle of quadtrees.\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;  o disk          Refinement on a spherical disk of five trees.\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;  o corner        Refinement on a non-planar hexagon made of three trees.\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;  o moebius       Refinement on a 5-tree Moebius band embedded in 3D.\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;  o icosahedron   Refinement on the icosahedron sphere with geometry.\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;&lt;level&gt; is the second optional argument (default is 4).\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;  It is clamped into the range of [0, P4EST_QMAXLEVEL].\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;  This argument takes precedence over the option of the same name.\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;No more than two non-option arguments may be specified.\n&quot;</span>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* This internal header contains application data for both 2D and 3D. */</span></div>
<div class="line"><span class="preprocessor">#include &quot;userdata_global.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* process the command line */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">p4est_userdata_process (p4est_userdata_global_t *g)</div>
<div class="line">{</div>
<div class="line">  P4EST_ASSERT (g != NULL &amp;&amp; g-&gt;options != NULL);</div>
<div class="line">  P4EST_ASSERT (g-&gt;configuration != NULL);</div>
<div class="line">  P4EST_ASSERT (g-&gt;conn == NULL);</div>
<div class="line">  P4EST_ASSERT (g-&gt;geom == NULL);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* choose one of the available mesh configurations */</span></div>
<div class="line">  <span class="keywordflow">if</span> (!strcmp (g-&gt;configuration, <span class="stringliteral">&quot;unit&quot;</span>)) {</div>
<div class="line"><span class="preprocessor">#ifndef P4_TO_P8</span></div>
<div class="line">    g-&gt;conn = <a name="a0"></a><a class="code" href="p4est__connectivity_8h.html#aab03936b137ccdc4fa7520e7e017fcf0">p4est_connectivity_new_unitsquare</a> ();</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">    g-&gt;conn = <a name="a1"></a><a class="code" href="p8est__connectivity_8h.html#a53bdb596e76c52c1e23aaecd0aacc763">p8est_connectivity_new_unitcube</a> ();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">  }</div>
<div class="line"><span class="preprocessor">#ifndef P4_TO_P8</span></div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (g-&gt;configuration, <span class="stringliteral">&quot;periodic&quot;</span>)) {</div>
<div class="line">    g-&gt;conn = <a name="a2"></a><a class="code" href="p4est__connectivity_8h.html#ae65fe72b77b6f6c6825fc33efc101dab">p4est_connectivity_new_periodic</a> ();</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (g-&gt;configuration, <span class="stringliteral">&quot;brick&quot;</span>)) {</div>
<div class="line">    g-&gt;conn = <a name="a3"></a><a class="code" href="p4est__connectivity_8h.html#a524e3271ec0560d269403e5ec1c993dc">p4est_connectivity_new_brick</a> (2, 3, 0, 0);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (g-&gt;configuration, <span class="stringliteral">&quot;disk&quot;</span>)) {</div>
<div class="line">    g-&gt;conn = <a name="a4"></a><a class="code" href="p4est__connectivity_8h.html#ac39f17faf968325be2eb29e90b81d97d">p4est_connectivity_new_disk_nonperiodic</a> ();</div>
<div class="line">    g-&gt;geom = <a name="a5"></a><a class="code" href="p4est__geometry_8h.html#a555fa98e3fa206cb375d4b61454e815e">p4est_geometry_new_disk2d</a> (g-&gt;conn, .4, 1.);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (g-&gt;configuration, <span class="stringliteral">&quot;corner&quot;</span>)) {</div>
<div class="line">    g-&gt;conn = <a name="a6"></a><a class="code" href="p4est__connectivity_8h.html#ad6fcb80b167783b7ab298755473c8177">p4est_connectivity_new_corner</a> ();</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (g-&gt;configuration, <span class="stringliteral">&quot;moebius&quot;</span>)) {</div>
<div class="line">    g-&gt;conn = <a name="a7"></a><a class="code" href="p4est__connectivity_8h.html#a1e487dc9a4ba345cfffea3763eb822aa">p4est_connectivity_new_moebius</a> ();</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (g-&gt;configuration, <span class="stringliteral">&quot;icosahedron&quot;</span>)) {</div>
<div class="line">    g-&gt;conn = <a name="a8"></a><a class="code" href="p4est__connectivity_8h.html#a22189ecf16818e0ad94f7be8070027d1">p4est_connectivity_new_icosahedron</a> ();</div>
<div class="line">    g-&gt;geom = <a name="a9"></a><a class="code" href="p4est__geometry_8h.html#af3489702c0cf88298117da44463c2193">p4est_geometry_new_icosahedron</a> (g-&gt;conn, 1.);</div>
<div class="line">  }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (g-&gt;configuration, <span class="stringliteral">&quot;periodic&quot;</span>)) {</div>
<div class="line">    g-&gt;conn = <a name="a10"></a><a class="code" href="p8est__connectivity_8h.html#a1374c4c2fc06e436e047d32c28b87288">p8est_connectivity_new_periodic</a> ();</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (g-&gt;configuration, <span class="stringliteral">&quot;brick&quot;</span>)) {</div>
<div class="line">    g-&gt;conn = <a name="a11"></a><a class="code" href="p8est__connectivity_8h.html#ae103ab738559fee854be2eba2f9cb4cd">p8est_connectivity_new_brick</a> (2, 3, 5, 0, 0, 0);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (g-&gt;configuration, <span class="stringliteral">&quot;rotcubes&quot;</span>)) {</div>
<div class="line">    g-&gt;conn = <a name="a12"></a><a class="code" href="p8est__connectivity_8h.html#ac88e4c055b8847d3c9074c17c624da6e">p8est_connectivity_new_rotcubes</a> ();</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (g-&gt;configuration, <span class="stringliteral">&quot;sphere&quot;</span>)) {</div>
<div class="line">    g-&gt;conn = <a name="a13"></a><a class="code" href="p8est__connectivity_8h.html#ae77c9a09e22ab4788888ad65045a0722">p8est_connectivity_new_sphere</a> ();</div>
<div class="line">    g-&gt;geom = <a name="a14"></a><a class="code" href="p8est__geometry_8h.html#acbbb83633ccbc82ebb0c66bda3d3cd3e">p8est_geometry_new_sphere</a> (g-&gt;conn, 1., .6, .3);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (g-&gt;configuration, <span class="stringliteral">&quot;shell&quot;</span>)) {</div>
<div class="line">    g-&gt;conn = <a name="a15"></a><a class="code" href="p8est__connectivity_8h.html#a8cbb255251c75f998d200aa3873fd359">p8est_connectivity_new_shell</a> ();</div>
<div class="line">    g-&gt;geom = <a name="a16"></a><a class="code" href="p8est__geometry_8h.html#acc7047c9e6923c9dd69bf77febc49301">p8est_geometry_new_shell</a> (g-&gt;conn, 1., .5);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (g-&gt;configuration, <span class="stringliteral">&quot;torus&quot;</span>)) {</div>
<div class="line">    g-&gt;conn = <a name="a17"></a><a class="code" href="p8est__connectivity_8h.html#aa50117d066094039f84db7e27600d0a9">p8est_connectivity_new_torus</a> (6);</div>
<div class="line">    g-&gt;geom = <a name="a18"></a><a class="code" href="p8est__geometry_8h.html#a5809623dbb9a50f37488fd552f4c17d2">p8est_geometry_new_torus</a> (g-&gt;conn, .1, .3, .7);</div>
<div class="line">  }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* clamp level into legal range */</span></div>
<div class="line">  <span class="keywordflow">if</span> (g-&gt;maxlevel &lt; 0) {</div>
<div class="line">    g-&gt;maxlevel = 0;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (g-&gt;maxlevel &gt; <a name="a19"></a><a class="code" href="p4est_8h.html#a398bac71234696389c90d0f986bb31aa">P4EST_QMAXLEVEL</a>) {</div>
<div class="line">    g-&gt;maxlevel = <a class="code" href="p4est_8h.html#a398bac71234696389c90d0f986bb31aa">P4EST_QMAXLEVEL</a>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* this is the only error condition of this function */</span></div>
<div class="line">  <span class="keywordflow">if</span> (g-&gt;conn == NULL) {</div>
<div class="line">    P4EST_GLOBAL_LERROR (<span class="stringliteral">&quot;ERROR: Invalid configuration argument\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* if no geometry is specified, default to vertex information */</span></div>
<div class="line">  <span class="keywordflow">if</span> (g-&gt;geom == NULL) {</div>
<div class="line">    g-&gt;geom = <a name="a20"></a><a class="code" href="p4est__geometry_8h.html#af9ba2d7b679c66899ddb82c1623e7ce4">p4est_geometry_new_connectivity</a> (g-&gt;conn);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* successful return! */</span></div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* process command line options */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">p4est_userdata_options (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv, p4est_userdata_global_t *g)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span>                 erres;</div>
<div class="line">  <span class="keywordtype">int</span>                 firstarg;</div>
<div class="line">  sc_options_t       *o;</div>
<div class="line"> </div>
<div class="line">  P4EST_ASSERT (argc &gt;= 1);</div>
<div class="line">  P4EST_ASSERT (argv != NULL);</div>
<div class="line">  P4EST_ASSERT (g != NULL);</div>
<div class="line">  P4EST_ASSERT (g-&gt;options == NULL);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* allocate new options processor */</span></div>
<div class="line">  o = g-&gt;options = sc_options_new (argv[0]);</div>
<div class="line">  sc_options_add_switch (o, <span class="charliteral">&#39;h&#39;</span>, <span class="stringliteral">&quot;help&quot;</span>, &amp;g-&gt;help,</div>
<div class="line">                         <span class="stringliteral">&quot;Print help message and exit cleanly&quot;</span>);</div>
<div class="line">  sc_options_add_int (o, <span class="charliteral">&#39;L&#39;</span>, <span class="stringliteral">&quot;maxlevel&quot;</span>, &amp;g-&gt;maxlevel, 4,</div>
<div class="line">                      <span class="stringliteral">&quot;Maximum refinement level&quot;</span>);</div>
<div class="line">  sc_options_add_switch (o, <span class="charliteral">&#39;N&#39;</span>, <span class="stringliteral">&quot;no-vtk&quot;</span>, &amp;g-&gt;novtk,</div>
<div class="line">                         <span class="stringliteral">&quot;Do not write VTK graphics files&quot;</span>);</div>
<div class="line">  sc_options_add_switch (o, <span class="charliteral">&#39;I&#39;</span>, <span class="stringliteral">&quot;no-int&quot;</span>, &amp;g-&gt;noint,</div>
<div class="line">                         <span class="stringliteral">&quot;Skip the part with internal user data&quot;</span>);</div>
<div class="line">  sc_options_add_switch (o, <span class="charliteral">&#39;E&#39;</span>, <span class="stringliteral">&quot;no-ext&quot;</span>, &amp;g-&gt;noext,</div>
<div class="line">                         <span class="stringliteral">&quot;Skip the part with external user data&quot;</span>);</div>
<div class="line">  g-&gt;configuration = <span class="stringliteral">&quot;unit&quot;</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* error condition of this function */</span></div>
<div class="line">  erres = 0;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* parse command line options and log eventual errors with priority */</span></div>
<div class="line">  <span class="keywordflow">if</span> (!erres &amp;&amp; (erres = ((firstarg = sc_options_parse</div>
<div class="line">                           (<a name="a21"></a><a class="code" href="p4est__base_8h.html#a8f1ce3300c283b066cff4d6fe8ce3e52">p4est_get_package_id</a> (), SC_LP_ERROR,</div>
<div class="line">                            o, argc, argv)) &lt; 0))) {</div>
<div class="line">    P4EST_GLOBAL_LERROR (<span class="stringliteral">&quot;ERROR: processing options\n&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  P4EST_ASSERT (erres || (1 &lt;= firstarg &amp;&amp; firstarg &lt;= argc));</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* process first non-option command line argument */</span></div>
<div class="line">  <span class="keywordflow">if</span> (!erres &amp;&amp; firstarg &lt; argc) {</div>
<div class="line">    g-&gt;configuration = argv[firstarg++];</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* process second non-option command line argument */</span></div>
<div class="line">  <span class="keywordflow">if</span> (!erres &amp;&amp; firstarg &lt; argc) {</div>
<div class="line">    g-&gt;maxlevel = atoi (argv[firstarg++]);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* we do not permit more than two non-option arguments */</span></div>
<div class="line">  <span class="keywordflow">if</span> (!erres &amp;&amp; (erres = (firstarg &lt; argc))) {</div>
<div class="line">    P4EST_GLOBAL_LERROR (<span class="stringliteral">&quot;ERROR: no more than two arguments are allowed\n&quot;</span>);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* initialize variables based on command line */</span></div>
<div class="line">  <span class="keywordflow">if</span> (!erres &amp;&amp; (erres = p4est_userdata_process (g))) {</div>
<div class="line">    P4EST_GLOBAL_LERROR (<span class="stringliteral">&quot;ERROR: processing the command line\n&quot;</span>);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (g-&gt;help || erres) {</div>
<div class="line">    <span class="comment">/* print a usage message to explain the command line arguments */</span></div>
<div class="line">    sc_options_print_usage (<a class="code" href="p4est__base_8h.html#a8f1ce3300c283b066cff4d6fe8ce3e52">p4est_get_package_id</a> (), SC_LP_PRODUCTION, o,</div>
<div class="line">                            p4est_userdata_usage);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="comment">/* on normal operation print options for posteriority */</span></div>
<div class="line">    sc_options_print_summary (<a class="code" href="p4est__base_8h.html#a8f1ce3300c283b066cff4d6fe8ce3e52">p4est_get_package_id</a> (), SC_LP_PRODUCTION, o);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* this function has processed the command line */</span></div>
<div class="line">  <span class="keywordflow">return</span> erres;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* free allocated application memory */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">p4est_userdata_cleanup (p4est_userdata_global_t *g)</div>
<div class="line">{</div>
<div class="line">  P4EST_ASSERT (g != NULL);</div>
<div class="line">  P4EST_ASSERT (g-&gt;options != NULL);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* this data may or may not have been initialized */</span></div>
<div class="line">  <span class="keywordflow">if</span> (g-&gt;geom != NULL) {</div>
<div class="line">    P4EST_ASSERT (g-&gt;conn != NULL);</div>
<div class="line">    <a name="a22"></a><a class="code" href="p4est__geometry_8h.html#ad389d94045e366e64a0c7854739f1f8f">p4est_geometry_destroy</a> (g-&gt;geom);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (g-&gt;conn != NULL) {</div>
<div class="line">    <a name="a23"></a><a class="code" href="p4est__connectivity_8h.html#a208e613cae5e1bd3baffb587387b672c">p4est_connectivity_destroy</a> (g-&gt;conn);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* options are always defined at this point */</span></div>
<div class="line">  sc_options_destroy (g-&gt;options);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* the main function of the program */</span></div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span>                 erres;</div>
<div class="line">  <span class="keywordtype">int</span>                 mpiret;</div>
<div class="line">  p4est_userdata_global_t sglobal, *global = &amp;sglobal;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* initialize MPI subsystem */</span></div>
<div class="line">  mpiret = sc_MPI_Init (&amp;argc, &amp;argv);</div>
<div class="line">  SC_CHECK_MPI (mpiret);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* initialize global application data context */</span></div>
<div class="line">  memset (global, 0, <span class="keyword">sizeof</span> (*global));</div>
<div class="line">  global-&gt;mpicomm = sc_MPI_COMM_WORLD;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/*</span></div>
<div class="line"><span class="comment">   * The options 1, 1 catch signals and set an abort handler.</span></div>
<div class="line"><span class="comment">   * This is NOT what you want if (a) you are using p4est purely as a</span></div>
<div class="line"><span class="comment">   * library or (b) your main programs refer to a different framework for</span></div>
<div class="line"><span class="comment">   * such lowlevel functionality.  In these cases please use 0, 0.</span></div>
<div class="line"><span class="comment">   *</span></div>
<div class="line"><span class="comment">   * The log level SC_LP_APPLICATION is rather conservative.  If you&#39;d</span></div>
<div class="line"><span class="comment">   * prefer total silence under normal operating conditions you may use</span></div>
<div class="line"><span class="comment">   * SC_LP_ERROR.  p4est does not trigger the error priority by itself, but</span></div>
<div class="line"><span class="comment">   * it can be used by the application developer, for example to issue log</span></div>
<div class="line"><span class="comment">   * messages on any usage or file I/O errors detected.</span></div>
<div class="line"><span class="comment">   */</span></div>
<div class="line">  sc_init (global-&gt;mpicomm, 1, 1, NULL, SC_LP_APPLICATION);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/*</span></div>
<div class="line"><span class="comment">   * The setting SC_LP_APPLICATION will log levels from SC_LP_PRODUCTION</span></div>
<div class="line"><span class="comment">   * upwards.  Thus, if your program should print performance metrics, for</span></div>
<div class="line"><span class="comment">   * example, that can be accomplished (for information available on rank 0)</span></div>
<div class="line"><span class="comment">   * using the logging macros P4EST_PRODUCTION and P4EST_PRODUCTIONF.</span></div>
<div class="line"><span class="comment">   */</span></div>
<div class="line">  <a name="a24"></a><a class="code" href="p4est__base_8h.html#aab4b16aa58790d309e0cf46ed665c6b9">p4est_init</a> (NULL, SC_LP_APPLICATION);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* we identify an error status of the program with a nonzero value */</span></div>
<div class="line">  erres = 0;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* process command line options */</span></div>
<div class="line">  <span class="keywordflow">if</span> (!erres &amp;&amp; (erres = p4est_userdata_options (argc, argv, global)))</div>
<div class="line">  {</div>
<div class="line">    P4EST_GLOBAL_LERROR (<span class="stringliteral">&quot;ERROR: Usage/options\n&quot;</span>);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/*</span></div>
<div class="line"><span class="comment">   * Run actual demo (except when a help message has been requested).</span></div>
<div class="line"><span class="comment">   * We have moved the code for this function into a separate file.</span></div>
<div class="line"><span class="comment">   * The reason is that the present file is an excellent template</span></div>
<div class="line"><span class="comment">   * for your own p4est application.  Just copy it and hack away.</span></div>
<div class="line"><span class="comment">   */</span></div>
<div class="line">  <span class="keywordflow">if</span> (!erres &amp;&amp; !global-&gt;help &amp;&amp; (erres = p4est_userdata_run (global)))</div>
<div class="line">  {</div>
<div class="line">    P4EST_GLOBAL_LERROR (<span class="stringliteral">&quot;ERROR: running the program\n&quot;</span>);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* free all data regardless of the error condition */</span></div>
<div class="line">  p4est_userdata_cleanup (global);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* check memory balance and clean up internal registrations */</span></div>
<div class="line">  sc_finalize ();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* release the MPI subsytem */</span></div>
<div class="line">  mpiret = sc_MPI_Finalize ();</div>
<div class="line">  SC_CHECK_MPI (mpiret);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* return failure or success to the calling shell */</span></div>
<div class="line">  <span class="keywordflow">return</span> erres ? EXIT_FAILURE : EXIT_SUCCESS;</div>
<div class="line">}</div>
<div class="ttc" id="ap4est_8h_html_a398bac71234696389c90d0f986bb31aa"><div class="ttname"><a href="p4est_8h.html#a398bac71234696389c90d0f986bb31aa">P4EST_QMAXLEVEL</a></div><div class="ttdeci">#define P4EST_QMAXLEVEL</div><div class="ttdoc">The finest level of the quadtree for representing quadrant corners.</div><div class="ttdef"><b>Definition:</b> p4est.h:59</div></div>
<div class="ttc" id="ap4est__base_8h_html_a8f1ce3300c283b066cff4d6fe8ce3e52"><div class="ttname"><a href="p4est__base_8h.html#a8f1ce3300c283b066cff4d6fe8ce3e52">p4est_get_package_id</a></div><div class="ttdeci">int p4est_get_package_id(void)</div><div class="ttdoc">Query the package identity as registered in libsc.</div></div>
<div class="ttc" id="ap4est__base_8h_html_aab4b16aa58790d309e0cf46ed665c6b9"><div class="ttname"><a href="p4est__base_8h.html#aab4b16aa58790d309e0cf46ed665c6b9">p4est_init</a></div><div class="ttdeci">void p4est_init(sc_log_handler_t log_handler, int log_threshold)</div><div class="ttdoc">Registers p4est with the SC Library and sets the logging behavior.</div></div>
<div class="ttc" id="ap4est__connectivity_8h_html_a1e487dc9a4ba345cfffea3763eb822aa"><div class="ttname"><a href="p4est__connectivity_8h.html#a1e487dc9a4ba345cfffea3763eb822aa">p4est_connectivity_new_moebius</a></div><div class="ttdeci">p4est_connectivity_t * p4est_connectivity_new_moebius(void)</div><div class="ttdoc">Create a connectivity structure for a five-tree moebius band.</div></div>
<div class="ttc" id="ap4est__connectivity_8h_html_a208e613cae5e1bd3baffb587387b672c"><div class="ttname"><a href="p4est__connectivity_8h.html#a208e613cae5e1bd3baffb587387b672c">p4est_connectivity_destroy</a></div><div class="ttdeci">void p4est_connectivity_destroy(p4est_connectivity_t *connectivity)</div><div class="ttdoc">Destroy a connectivity structure.</div></div>
<div class="ttc" id="ap4est__connectivity_8h_html_a22189ecf16818e0ad94f7be8070027d1"><div class="ttname"><a href="p4est__connectivity_8h.html#a22189ecf16818e0ad94f7be8070027d1">p4est_connectivity_new_icosahedron</a></div><div class="ttdeci">p4est_connectivity_t * p4est_connectivity_new_icosahedron(void)</div><div class="ttdoc">Create a connectivity for mapping the sphere using an icosahedron.</div></div>
<div class="ttc" id="ap4est__connectivity_8h_html_a524e3271ec0560d269403e5ec1c993dc"><div class="ttname"><a href="p4est__connectivity_8h.html#a524e3271ec0560d269403e5ec1c993dc">p4est_connectivity_new_brick</a></div><div class="ttdeci">p4est_connectivity_t * p4est_connectivity_new_brick(int mi, int ni, int periodic_a, int periodic_b)</div><div class="ttdoc">A rectangular m by n array of trees with configurable periodicity.</div></div>
<div class="ttc" id="ap4est__connectivity_8h_html_aab03936b137ccdc4fa7520e7e017fcf0"><div class="ttname"><a href="p4est__connectivity_8h.html#aab03936b137ccdc4fa7520e7e017fcf0">p4est_connectivity_new_unitsquare</a></div><div class="ttdeci">p4est_connectivity_t * p4est_connectivity_new_unitsquare(void)</div><div class="ttdoc">Create a connectivity structure for the unit square.</div></div>
<div class="ttc" id="ap4est__connectivity_8h_html_ac39f17faf968325be2eb29e90b81d97d"><div class="ttname"><a href="p4est__connectivity_8h.html#ac39f17faf968325be2eb29e90b81d97d">p4est_connectivity_new_disk_nonperiodic</a></div><div class="ttdeci">p4est_connectivity_t * p4est_connectivity_new_disk_nonperiodic(void)</div><div class="ttdoc">Create a connectivity structure for a five-tree flat spherical disk.</div></div>
<div class="ttc" id="ap4est__connectivity_8h_html_ad6fcb80b167783b7ab298755473c8177"><div class="ttname"><a href="p4est__connectivity_8h.html#ad6fcb80b167783b7ab298755473c8177">p4est_connectivity_new_corner</a></div><div class="ttdeci">p4est_connectivity_t * p4est_connectivity_new_corner(void)</div><div class="ttdoc">Create a connectivity structure for a three-tree mesh around a corner.</div></div>
<div class="ttc" id="ap4est__connectivity_8h_html_ae65fe72b77b6f6c6825fc33efc101dab"><div class="ttname"><a href="p4est__connectivity_8h.html#ae65fe72b77b6f6c6825fc33efc101dab">p4est_connectivity_new_periodic</a></div><div class="ttdeci">p4est_connectivity_t * p4est_connectivity_new_periodic(void)</div><div class="ttdoc">Create a connectivity structure for an all-periodic unit square.</div></div>
<div class="ttc" id="ap4est__geometry_8h_html_a555fa98e3fa206cb375d4b61454e815e"><div class="ttname"><a href="p4est__geometry_8h.html#a555fa98e3fa206cb375d4b61454e815e">p4est_geometry_new_disk2d</a></div><div class="ttdeci">p4est_geometry_t * p4est_geometry_new_disk2d(p4est_connectivity_t *conn, double R0, double R1)</div><div class="ttdoc">Create disk2d geometry associated to disk2d connectivity.</div></div>
<div class="ttc" id="ap4est__geometry_8h_html_ad389d94045e366e64a0c7854739f1f8f"><div class="ttname"><a href="p4est__geometry_8h.html#ad389d94045e366e64a0c7854739f1f8f">p4est_geometry_destroy</a></div><div class="ttdeci">void p4est_geometry_destroy(p4est_geometry_t *geom)</div><div class="ttdoc">Can be used to conveniently destroy a geometry structure.</div></div>
<div class="ttc" id="ap4est__geometry_8h_html_af3489702c0cf88298117da44463c2193"><div class="ttname"><a href="p4est__geometry_8h.html#af3489702c0cf88298117da44463c2193">p4est_geometry_new_icosahedron</a></div><div class="ttdeci">p4est_geometry_t * p4est_geometry_new_icosahedron(p4est_connectivity_t *conn, double R)</div><div class="ttdoc">Create a geometry for mapping the sphere using 2d connectivity icosahedron.</div></div>
<div class="ttc" id="ap4est__geometry_8h_html_af9ba2d7b679c66899ddb82c1623e7ce4"><div class="ttname"><a href="p4est__geometry_8h.html#af9ba2d7b679c66899ddb82c1623e7ce4">p4est_geometry_new_connectivity</a></div><div class="ttdeci">p4est_geometry_t * p4est_geometry_new_connectivity(p4est_connectivity_t *conn)</div><div class="ttdoc">Create a geometry structure based on the vertices in a connectivity.</div></div>
<div class="ttc" id="ap8est__connectivity_8h_html_a1374c4c2fc06e436e047d32c28b87288"><div class="ttname"><a href="p8est__connectivity_8h.html#a1374c4c2fc06e436e047d32c28b87288">p8est_connectivity_new_periodic</a></div><div class="ttdeci">p8est_connectivity_t * p8est_connectivity_new_periodic(void)</div><div class="ttdoc">Create a connectivity structure for an all-periodic unit cube.</div></div>
<div class="ttc" id="ap8est__connectivity_8h_html_a53bdb596e76c52c1e23aaecd0aacc763"><div class="ttname"><a href="p8est__connectivity_8h.html#a53bdb596e76c52c1e23aaecd0aacc763">p8est_connectivity_new_unitcube</a></div><div class="ttdeci">p8est_connectivity_t * p8est_connectivity_new_unitcube(void)</div><div class="ttdoc">Create a connectivity structure for the unit cube.</div></div>
<div class="ttc" id="ap8est__connectivity_8h_html_a8cbb255251c75f998d200aa3873fd359"><div class="ttname"><a href="p8est__connectivity_8h.html#a8cbb255251c75f998d200aa3873fd359">p8est_connectivity_new_shell</a></div><div class="ttdeci">p8est_connectivity_t * p8est_connectivity_new_shell(void)</div><div class="ttdoc">Create a connectivity structure that builds a spherical shell.</div></div>
<div class="ttc" id="ap8est__connectivity_8h_html_aa50117d066094039f84db7e27600d0a9"><div class="ttname"><a href="p8est__connectivity_8h.html#aa50117d066094039f84db7e27600d0a9">p8est_connectivity_new_torus</a></div><div class="ttdeci">p8est_connectivity_t * p8est_connectivity_new_torus(int nSegments)</div><div class="ttdoc">Create a connectivity structure that builds a revolution torus.</div></div>
<div class="ttc" id="ap8est__connectivity_8h_html_ac88e4c055b8847d3c9074c17c624da6e"><div class="ttname"><a href="p8est__connectivity_8h.html#ac88e4c055b8847d3c9074c17c624da6e">p8est_connectivity_new_rotcubes</a></div><div class="ttdeci">p8est_connectivity_t * p8est_connectivity_new_rotcubes(void)</div><div class="ttdoc">Create a connectivity structure that contains a few cubes.</div></div>
<div class="ttc" id="ap8est__connectivity_8h_html_ae103ab738559fee854be2eba2f9cb4cd"><div class="ttname"><a href="p8est__connectivity_8h.html#ae103ab738559fee854be2eba2f9cb4cd">p8est_connectivity_new_brick</a></div><div class="ttdeci">p8est_connectivity_t * p8est_connectivity_new_brick(int m, int n, int p, int periodic_a, int periodic_b, int periodic_c)</div><div class="ttdoc">An m by n by p array with periodicity in x, y, and z if periodic_a, periodic_b, and periodic_c are tr...</div></div>
<div class="ttc" id="ap8est__connectivity_8h_html_ae77c9a09e22ab4788888ad65045a0722"><div class="ttname"><a href="p8est__connectivity_8h.html#ae77c9a09e22ab4788888ad65045a0722">p8est_connectivity_new_sphere</a></div><div class="ttdeci">p8est_connectivity_t * p8est_connectivity_new_sphere(void)</div><div class="ttdoc">Create a connectivity structure that builds a solid sphere.</div></div>
<div class="ttc" id="ap8est__geometry_8h_html_a5809623dbb9a50f37488fd552f4c17d2"><div class="ttname"><a href="p8est__geometry_8h.html#a5809623dbb9a50f37488fd552f4c17d2">p8est_geometry_new_torus</a></div><div class="ttdeci">p8est_geometry_t * p8est_geometry_new_torus(p8est_connectivity_t *conn, double R0, double R1, double R2)</div><div class="ttdoc">Create a geometry structure for the torus.</div></div>
<div class="ttc" id="ap8est__geometry_8h_html_acbbb83633ccbc82ebb0c66bda3d3cd3e"><div class="ttname"><a href="p8est__geometry_8h.html#acbbb83633ccbc82ebb0c66bda3d3cd3e">p8est_geometry_new_sphere</a></div><div class="ttdeci">p8est_geometry_t * p8est_geometry_new_sphere(p8est_connectivity_t *conn, double R2, double R1, double R0)</div><div class="ttdoc">Create a geometry structure for the solid sphere of 13 trees.</div></div>
<div class="ttc" id="ap8est__geometry_8h_html_acc7047c9e6923c9dd69bf77febc49301"><div class="ttname"><a href="p8est__geometry_8h.html#acc7047c9e6923c9dd69bf77febc49301">p8est_geometry_new_shell</a></div><div class="ttdeci">p8est_geometry_t * p8est_geometry_new_shell(p8est_connectivity_t *conn, double R2, double R1)</div><div class="ttdoc">Create a geometry structure for the spherical shell of 24 trees.</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/>
</body>
</html>
