<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>p4est: points/generate_points2.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">p4est
   &#160;<span id="projectnumber">2.8.7</span>
   </div>
   <div id="projectbrief">p4est is a software library for parallel adaptive mesh refinement.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">points/generate_points2.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>Auxiliary program (3D counterpart: <a class="el" href="points_2generate_points3_8c-example.html">points/generate_points3.c</a>) to generate a file of points in parallel.It uses the MPI I/O functionality of libsc to create one large file. The file is written to in parallel and using partitioned file access.</p>
<p>The file contains first a binary integer <a class="el" href="p4est__base_8h.html#af4d787f9b2520af0cfe9a10b89235749">p4est_gloidx_t</a> storing the global number of points and then the list of point coordinates as 3-tuples of binary type double.</p>
<p>The usage of the program is </p><pre class="fragment">p4est_points_generate &lt;configuration&gt; &lt;globalnumpoints&gt; &lt;prefix&gt;
</pre><p> where configuration is one of</p>
<ul>
<li><code>unit</code> The 2D unit square,</li>
<li><code>brick</code> A 2x3 grid of squares,</li>
<li><code>three</code> Three squares meeting at a non-planary angle,</li>
<li><code>moebius</code> A five-square moebius strip embedded in 3D space,</li>
<li><code>star</code> A star composed of six rhomboids,</li>
<li><code>periodic</code> The all-periodic unit square</li>
</ul>
<p>and prefix is an output basename or filename to which we append <code>.pts</code>.</p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">  This file is part of p4est.</span></div>
<div class="line"><span class="comment">  p4est is a C library to manage a collection (a forest) of multiple</span></div>
<div class="line"><span class="comment">  connected adaptive quadtrees or octrees in parallel.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  Copyright (C) 2010 The University of Texas System</span></div>
<div class="line"><span class="comment">  Additional copyright (C) 2011 individual authors</span></div>
<div class="line"><span class="comment">  Written by Carsten Burstedde, Lucas C. Wilcox, and Tobin Isaac</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  p4est is free software; you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment">  it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment">  the Free Software Foundation; either version 2 of the License, or</span></div>
<div class="line"><span class="comment">  (at your option) any later version.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  p4est is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment">  GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment">  along with p4est; if not, write to the Free Software Foundation, Inc.,</span></div>
<div class="line"><span class="comment">  51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef P4_TO_P8</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="p8est__bits_8h.html">p8est_bits.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;p8est_points.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="p8est__vtk_8h.html">p8est_vtk.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="p4est__bits_8h.html">p4est_bits.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;p4est_points.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="p4est__vtk_8h.html">p4est_vtk.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">/* !P4_TO_P8 */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &lt;sc_io.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Please see doc/example_points.dox for a documentation of this program. */</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">generate_points (<span class="keyword">const</span> <span class="keywordtype">char</span> *filename,</div>
<div class="line">                 <a name="_a0"></a><a class="code" href="structp4est__connectivity.html">p4est_connectivity_t</a> * conn,</div>
<div class="line">                 <a class="code" href="p4est__base_8h.html#af4d787f9b2520af0cfe9a10b89235749">p4est_gloidx_t</a> global_num_points, sc_MPI_Comm mpicomm)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span>                 mpiret;</div>
<div class="line">  <span class="keywordtype">int</span>                 num_procs, rank;</div>
<div class="line">  <span class="keywordtype">int</span>                 count;</div>
<div class="line">  <a class="code" href="p4est__base_8h.html#af4d787f9b2520af0cfe9a10b89235749">p4est_gloidx_t</a>      offset_mine, offset_next;</div>
<div class="line">  <a class="code" href="p4est__base_8h.html#a9f350ee78755ec6e7d25fb1dca474573">p4est_locidx_t</a>      local_num_points;</div>
<div class="line">  <a class="code" href="p4est__base_8h.html#a9f350ee78755ec6e7d25fb1dca474573">p4est_locidx_t</a>      u;</div>
<div class="line">  <span class="keywordtype">double</span>             *point_buffer;</div>
<div class="line">  <span class="keywordtype">double</span>              theta;</div>
<div class="line"><span class="preprocessor">#ifdef P4_TO_P8</span></div>
<div class="line">  <span class="keywordtype">double</span>              phi;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">  <span class="keywordtype">double</span>              dtheta;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">  sc_MPI_File         file_handle;</div>
<div class="line">  sc_MPI_Offset       mpi_offset;</div>
<div class="line"> </div>
<div class="line">  mpiret = sc_MPI_Comm_size (mpicomm, &amp;num_procs);</div>
<div class="line">  SC_CHECK_MPI (mpiret);</div>
<div class="line">  mpiret = sc_MPI_Comm_rank (mpicomm, &amp;rank);</div>
<div class="line">  SC_CHECK_MPI (mpiret);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* open a file (create if the file does not exist) */</span></div>
<div class="line">  mpiret = sc_io_open (mpicomm, filename, SC_IO_WRITE_CREATE,</div>
<div class="line">                       sc_MPI_INFO_NULL, &amp;file_handle);</div>
<div class="line">  SC_CHECK_MPI (mpiret);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* local (MPI) number of points */</span></div>
<div class="line">  local_num_points = global_num_points / num_procs;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* offset to first point of current MPI process */</span></div>
<div class="line">  offset_mine = p4est_partition_cut_gloidx (global_num_points,</div>
<div class="line">                                            rank, num_procs);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* offset to first point of successor MPI process */</span></div>
<div class="line">  offset_next = p4est_partition_cut_gloidx (global_num_points,</div>
<div class="line">                                            rank + 1, num_procs);</div>
<div class="line">  local_num_points = (<a name="a1"></a><a class="code" href="p4est__base_8h.html#a9f350ee78755ec6e7d25fb1dca474573">p4est_locidx_t</a>) (offset_next - offset_mine);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* allocate buffer for point&#39;s coordinates */</span></div>
<div class="line">  point_buffer = <a name="a2"></a><a class="code" href="p4est__base_8h.html#a1fef909873d570158d6ac7b43c7d94f1">P4EST_ALLOC</a> (<span class="keywordtype">double</span>, 3 * local_num_points);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* set file offset (in bytes) for this calling process */</span></div>
<div class="line">  <span class="comment">/* *INDENT-OFF* HORRIBLE indent bug */</span></div>
<div class="line">  mpi_offset = (sc_MPI_Offset) offset_mine * 3 * <span class="keyword">sizeof</span> (<span class="keywordtype">double</span>);</div>
<div class="line">  <span class="comment">/* *INDENT-ON* */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef P4_TO_P8</span></div>
<div class="line">  <span class="comment">/* 2D */</span></div>
<div class="line">  dtheta = (2. * M_PI) / global_num_points;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (u = 0; u &lt; local_num_points; ++u) {</div>
<div class="line">    theta = (offset_mine + u) * dtheta;</div>
<div class="line"> </div>
<div class="line">    point_buffer[3 * u + 0] = 0.5 + 0.25 * cos (theta);</div>
<div class="line">    point_buffer[3 * u + 1] = 0.5 + 0.25 * sin (2 * theta);</div>
<div class="line">    point_buffer[3 * u + 2] = 0.0;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* 3D */</span></div>
<div class="line">  <span class="keywordflow">for</span> (u = 0; u &lt; local_num_points; ++u) {</div>
<div class="line">    theta = 2. * M_PI * rand () / (RAND_MAX + 1.0);</div>
<div class="line">    phi = M_PI * rand () / (RAND_MAX + 1.0);</div>
<div class="line"> </div>
<div class="line">    point_buffer[3 * u + 0] = 0.5 + 0.25 * cos (theta) * sin (phi);</div>
<div class="line">    point_buffer[3 * u + 1] = 0.5 + 0.25 * sin (theta) * sin (phi);</div>
<div class="line">    point_buffer[3 * u + 2] = 0.5 + 0.25 * cos (phi);</div>
<div class="line">  }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (rank == 0) {</div>
<div class="line">    <span class="comment">/* write the global number number of points */</span></div>
<div class="line">    mpiret = sc_io_write_at (file_handle, 0, &amp;global_num_points,</div>
<div class="line">                             <span class="keyword">sizeof</span> (<a class="code" href="p4est__base_8h.html#af4d787f9b2520af0cfe9a10b89235749">p4est_gloidx_t</a>), sc_MPI_BYTE, &amp;count);</div>
<div class="line">    SC_CHECK_MPI (mpiret);</div>
<div class="line">    SC_CHECK_ABORT (count == (<span class="keywordtype">int</span>) <span class="keyword">sizeof</span> (<a class="code" href="p4est__base_8h.html#af4d787f9b2520af0cfe9a10b89235749">p4est_gloidx_t</a>),</div>
<div class="line">                    <span class="stringliteral">&quot;Write number of global points: count mismatch&quot;</span>);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* each MPI process writes its data for its own offset */</span></div>
<div class="line">  mpiret =</div>
<div class="line">    sc_io_write_at_all (file_handle, mpi_offset + <span class="keyword">sizeof</span> (<a class="code" href="p4est__base_8h.html#af4d787f9b2520af0cfe9a10b89235749">p4est_gloidx_t</a>),</div>
<div class="line">                        &amp;point_buffer[0],</div>
<div class="line">                        3 * local_num_points * <span class="keyword">sizeof</span> (<span class="keywordtype">double</span>), sc_MPI_BYTE,</div>
<div class="line">                        &amp;count);</div>
<div class="line">  SC_CHECK_MPI (mpiret);</div>
<div class="line">  SC_CHECK_ABORT (count == (<span class="keywordtype">int</span>) (3 * local_num_points * <span class="keyword">sizeof</span> (<span class="keywordtype">double</span>)),</div>
<div class="line">                  <span class="stringliteral">&quot;Write points: count mismatch&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <a name="a3"></a><a class="code" href="p4est__base_8h.html#a0b2d45f13b66edfed0ccfde75808c745">P4EST_FREE</a> (point_buffer);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* close the file collectively */</span></div>
<div class="line">  mpiret = sc_io_close (&amp;file_handle);</div>
<div class="line">  SC_CHECK_MPI (mpiret);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span>                 mpiret;</div>
<div class="line">  <span class="keywordtype">int</span>                 num_procs, rank;</div>
<div class="line">  <span class="keywordtype">int</span>                 wrongusage;</div>
<div class="line">  <span class="keywordtype">char</span>                buffer[BUFSIZ];</div>
<div class="line">  <a class="code" href="p4est__base_8h.html#af4d787f9b2520af0cfe9a10b89235749">p4est_gloidx_t</a>      global_num_points;</div>
<div class="line">  <a class="code" href="structp4est__connectivity.html">p4est_connectivity_t</a> *conn;</div>
<div class="line">  sc_MPI_Comm         mpicomm;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span>         *usage;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* initialize MPI and p4est internals */</span></div>
<div class="line">  mpiret = sc_MPI_Init (&amp;argc, &amp;argv);</div>
<div class="line">  SC_CHECK_MPI (mpiret);</div>
<div class="line">  mpicomm = sc_MPI_COMM_WORLD;</div>
<div class="line">  mpiret = sc_MPI_Comm_size (mpicomm, &amp;num_procs);</div>
<div class="line">  SC_CHECK_MPI (mpiret);</div>
<div class="line">  mpiret = sc_MPI_Comm_rank (mpicomm, &amp;rank);</div>
<div class="line">  SC_CHECK_MPI (mpiret);</div>
<div class="line"> </div>
<div class="line">  sc_init (mpicomm, 1, 1, NULL, SC_LP_DEFAULT);</div>
<div class="line">  <a name="a4"></a><a class="code" href="p4est__base_8h.html#aab4b16aa58790d309e0cf46ed665c6b9">p4est_init</a> (NULL, SC_LP_DEFAULT);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* process command line arguments */</span></div>
<div class="line">  usage =</div>
<div class="line">    <span class="stringliteral">&quot;Arguments: &lt;configuration&gt; &lt;globalnumpoints&gt; &lt;prefix&gt;\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;   Configuration can be any of\n&quot;</span></div>
<div class="line"><span class="preprocessor">#ifndef P4_TO_P8</span></div>
<div class="line">    <span class="stringliteral">&quot;      unit|brick|three|moebius|star|periodic\n&quot;</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">    <span class="stringliteral">&quot;      unit|brick|periodic|rotwrap|twocubes|rotcubes\n&quot;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">    <span class="stringliteral">&quot;   Globalnumpoints is the total number of points generated\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;      over all MPI process, &gt;= 0\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;   Prefix is for writing a point data file (using MPI-IO)\n&quot;</span>;</div>
<div class="line">  wrongusage = 0;</div>
<div class="line">  <span class="keywordflow">if</span> (!wrongusage &amp;&amp; argc != 4) {</div>
<div class="line">    P4EST_GLOBAL_LERROR (<span class="stringliteral">&quot;Invalid command line argument count\n&quot;</span>);</div>
<div class="line">    wrongusage = 1;</div>
<div class="line">  }</div>
<div class="line">  conn = NULL;</div>
<div class="line">  <span class="keywordflow">if</span> (!wrongusage) {</div>
<div class="line"><span class="preprocessor">#ifndef P4_TO_P8</span></div>
<div class="line">    <span class="keywordflow">if</span> (!strcmp (argv[1], <span class="stringliteral">&quot;unit&quot;</span>)) {</div>
<div class="line">      conn = <a name="a5"></a><a class="code" href="p4est__connectivity_8h.html#aab03936b137ccdc4fa7520e7e017fcf0">p4est_connectivity_new_unitsquare</a> ();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (argv[1], <span class="stringliteral">&quot;brick&quot;</span>)) {</div>
<div class="line">      conn = <a name="a6"></a><a class="code" href="p4est__connectivity_8h.html#a524e3271ec0560d269403e5ec1c993dc">p4est_connectivity_new_brick</a> (2, 3, 0, 0);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (argv[1], <span class="stringliteral">&quot;three&quot;</span>)) {</div>
<div class="line">      conn = <a name="a7"></a><a class="code" href="p4est__connectivity_8h.html#ad6fcb80b167783b7ab298755473c8177">p4est_connectivity_new_corner</a> ();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (argv[1], <span class="stringliteral">&quot;moebius&quot;</span>)) {</div>
<div class="line">      conn = <a name="a8"></a><a class="code" href="p4est__connectivity_8h.html#a1e487dc9a4ba345cfffea3763eb822aa">p4est_connectivity_new_moebius</a> ();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (argv[1], <span class="stringliteral">&quot;star&quot;</span>)) {</div>
<div class="line">      conn = <a name="a9"></a><a class="code" href="p4est__connectivity_8h.html#a24d49c084093dd00d7a8b29c19541e63">p4est_connectivity_new_star</a> ();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (argv[1], <span class="stringliteral">&quot;periodic&quot;</span>)) {</div>
<div class="line">      conn = <a name="a10"></a><a class="code" href="p4est__connectivity_8h.html#ae65fe72b77b6f6c6825fc33efc101dab">p4est_connectivity_new_periodic</a> ();</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">    <span class="keywordflow">if</span> (!strcmp (argv[1], <span class="stringliteral">&quot;unit&quot;</span>)) {</div>
<div class="line">      conn = <a name="a11"></a><a class="code" href="p8est__connectivity_8h.html#a53bdb596e76c52c1e23aaecd0aacc763">p8est_connectivity_new_unitcube</a> ();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (argv[1], <span class="stringliteral">&quot;brick&quot;</span>)) {</div>
<div class="line">      conn = <a name="a12"></a><a class="code" href="p8est__connectivity_8h.html#ae103ab738559fee854be2eba2f9cb4cd">p8est_connectivity_new_brick</a> (2, 3, 4, 0, 0, 0);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (argv[1], <span class="stringliteral">&quot;periodic&quot;</span>)) {</div>
<div class="line">      conn = <a name="a13"></a><a class="code" href="p8est__connectivity_8h.html#a1374c4c2fc06e436e047d32c28b87288">p8est_connectivity_new_periodic</a> ();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (argv[1], <span class="stringliteral">&quot;rotwrap&quot;</span>)) {</div>
<div class="line">      conn = <a name="a14"></a><a class="code" href="p8est__connectivity_8h.html#a9574e95e719a7cb31ce4c5a73bf3fa83">p8est_connectivity_new_rotwrap</a> ();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (argv[1], <span class="stringliteral">&quot;twocubes&quot;</span>)) {</div>
<div class="line">      conn = <a name="a15"></a><a class="code" href="p8est__connectivity_8h.html#a71b16c2537992a3c1e4e51cb52ce76e4">p8est_connectivity_new_twocubes</a> ();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (argv[1], <span class="stringliteral">&quot;rotcubes&quot;</span>)) {</div>
<div class="line">      conn = <a name="a16"></a><a class="code" href="p8est__connectivity_8h.html#ac88e4c055b8847d3c9074c17c624da6e">p8est_connectivity_new_rotcubes</a> ();</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      P4EST_GLOBAL_LERROR (<span class="stringliteral">&quot;Invalid connectivity configuration\n&quot;</span>);</div>
<div class="line">      wrongusage = 1;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (!wrongusage) {</div>
<div class="line">    global_num_points = (<a name="a17"></a><a class="code" href="p4est__base_8h.html#af4d787f9b2520af0cfe9a10b89235749">p4est_gloidx_t</a>) atol (argv[2]);</div>
<div class="line">    <span class="keywordflow">if</span> (global_num_points &lt;= -1) {</div>
<div class="line">      P4EST_GLOBAL_LERROR (<span class="stringliteral">&quot;Invalid global number of points\n&quot;</span>);</div>
<div class="line">      wrongusage = 1;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (wrongusage) {</div>
<div class="line">    P4EST_GLOBAL_LERROR (usage);</div>
<div class="line">    sc_abort_collective (<span class="stringliteral">&quot;Usage error&quot;</span>);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  SC_GLOBAL_PRODUCTIONF (<span class="stringliteral">&quot;Write %lld total points\n&quot;</span>,</div>
<div class="line">                         (<span class="keywordtype">long</span> <span class="keywordtype">long</span>) global_num_points);</div>
<div class="line">  snprintf (buffer, BUFSIZ, <span class="stringliteral">&quot;%s.pts&quot;</span>, argv[3]);</div>
<div class="line">  generate_points (buffer, conn, global_num_points, mpicomm);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* in the present version of this program the connectivity is not used */</span></div>
<div class="line">  <a name="a18"></a><a class="code" href="p4est__connectivity_8h.html#a208e613cae5e1bd3baffb587387b672c">p4est_connectivity_destroy</a> (conn);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* clean up and exit */</span></div>
<div class="line">  sc_finalize ();</div>
<div class="line"> </div>
<div class="line">  mpiret = sc_MPI_Finalize ();</div>
<div class="line">  SC_CHECK_MPI (mpiret);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="ap4est__base_8h_html_a0b2d45f13b66edfed0ccfde75808c745"><div class="ttname"><a href="p4est__base_8h.html#a0b2d45f13b66edfed0ccfde75808c745">P4EST_FREE</a></div><div class="ttdeci">#define P4EST_FREE(p)</div><div class="ttdoc">free an allocated array</div><div class="ttdef"><b>Definition:</b> p4est_base.h:210</div></div>
<div class="ttc" id="ap4est__base_8h_html_a1fef909873d570158d6ac7b43c7d94f1"><div class="ttname"><a href="p4est__base_8h.html#a1fef909873d570158d6ac7b43c7d94f1">P4EST_ALLOC</a></div><div class="ttdeci">#define P4EST_ALLOC(t, n)</div><div class="ttdoc">allocate a t-array with n elements</div><div class="ttdef"><b>Definition:</b> p4est_base.h:199</div></div>
<div class="ttc" id="ap4est__base_8h_html_a9f350ee78755ec6e7d25fb1dca474573"><div class="ttname"><a href="p4est__base_8h.html#a9f350ee78755ec6e7d25fb1dca474573">p4est_locidx_t</a></div><div class="ttdeci">int32_t p4est_locidx_t</div><div class="ttdoc">Typedef for processor-local indexing of quadrants and nodes.</div><div class="ttdef"><b>Definition:</b> p4est_base.h:106</div></div>
<div class="ttc" id="ap4est__base_8h_html_aab4b16aa58790d309e0cf46ed665c6b9"><div class="ttname"><a href="p4est__base_8h.html#aab4b16aa58790d309e0cf46ed665c6b9">p4est_init</a></div><div class="ttdeci">void p4est_init(sc_log_handler_t log_handler, int log_threshold)</div><div class="ttdoc">Registers p4est with the SC Library and sets the logging behavior.</div></div>
<div class="ttc" id="ap4est__base_8h_html_af4d787f9b2520af0cfe9a10b89235749"><div class="ttname"><a href="p4est__base_8h.html#af4d787f9b2520af0cfe9a10b89235749">p4est_gloidx_t</a></div><div class="ttdeci">int64_t p4est_gloidx_t</div><div class="ttdoc">Typedef for globally unique indexing of quadrants.</div><div class="ttdef"><b>Definition:</b> p4est_base.h:118</div></div>
<div class="ttc" id="ap4est__bits_8h_html"><div class="ttname"><a href="p4est__bits_8h.html">p4est_bits.h</a></div><div class="ttdoc">Routines for manipulating quadrants (neighbors, parents, children, etc.)</div></div>
<div class="ttc" id="ap4est__connectivity_8h_html_a1e487dc9a4ba345cfffea3763eb822aa"><div class="ttname"><a href="p4est__connectivity_8h.html#a1e487dc9a4ba345cfffea3763eb822aa">p4est_connectivity_new_moebius</a></div><div class="ttdeci">p4est_connectivity_t * p4est_connectivity_new_moebius(void)</div><div class="ttdoc">Create a connectivity structure for a five-tree moebius band.</div></div>
<div class="ttc" id="ap4est__connectivity_8h_html_a208e613cae5e1bd3baffb587387b672c"><div class="ttname"><a href="p4est__connectivity_8h.html#a208e613cae5e1bd3baffb587387b672c">p4est_connectivity_destroy</a></div><div class="ttdeci">void p4est_connectivity_destroy(p4est_connectivity_t *connectivity)</div><div class="ttdoc">Destroy a connectivity structure.</div></div>
<div class="ttc" id="ap4est__connectivity_8h_html_a24d49c084093dd00d7a8b29c19541e63"><div class="ttname"><a href="p4est__connectivity_8h.html#a24d49c084093dd00d7a8b29c19541e63">p4est_connectivity_new_star</a></div><div class="ttdeci">p4est_connectivity_t * p4est_connectivity_new_star(void)</div><div class="ttdoc">Create a connectivity structure for a six-tree star.</div></div>
<div class="ttc" id="ap4est__connectivity_8h_html_a524e3271ec0560d269403e5ec1c993dc"><div class="ttname"><a href="p4est__connectivity_8h.html#a524e3271ec0560d269403e5ec1c993dc">p4est_connectivity_new_brick</a></div><div class="ttdeci">p4est_connectivity_t * p4est_connectivity_new_brick(int mi, int ni, int periodic_a, int periodic_b)</div><div class="ttdoc">A rectangular m by n array of trees with configurable periodicity.</div></div>
<div class="ttc" id="ap4est__connectivity_8h_html_aab03936b137ccdc4fa7520e7e017fcf0"><div class="ttname"><a href="p4est__connectivity_8h.html#aab03936b137ccdc4fa7520e7e017fcf0">p4est_connectivity_new_unitsquare</a></div><div class="ttdeci">p4est_connectivity_t * p4est_connectivity_new_unitsquare(void)</div><div class="ttdoc">Create a connectivity structure for the unit square.</div></div>
<div class="ttc" id="ap4est__connectivity_8h_html_ad6fcb80b167783b7ab298755473c8177"><div class="ttname"><a href="p4est__connectivity_8h.html#ad6fcb80b167783b7ab298755473c8177">p4est_connectivity_new_corner</a></div><div class="ttdeci">p4est_connectivity_t * p4est_connectivity_new_corner(void)</div><div class="ttdoc">Create a connectivity structure for a three-tree mesh around a corner.</div></div>
<div class="ttc" id="ap4est__connectivity_8h_html_ae65fe72b77b6f6c6825fc33efc101dab"><div class="ttname"><a href="p4est__connectivity_8h.html#ae65fe72b77b6f6c6825fc33efc101dab">p4est_connectivity_new_periodic</a></div><div class="ttdeci">p4est_connectivity_t * p4est_connectivity_new_periodic(void)</div><div class="ttdoc">Create a connectivity structure for an all-periodic unit square.</div></div>
<div class="ttc" id="ap4est__vtk_8h_html"><div class="ttname"><a href="p4est__vtk_8h.html">p4est_vtk.h</a></div><div class="ttdoc">Routines for printing a forest and associated fields to VTK format.</div></div>
<div class="ttc" id="ap8est__bits_8h_html"><div class="ttname"><a href="p8est__bits_8h.html">p8est_bits.h</a></div><div class="ttdoc">Routines for manipulating quadrants (neighbors, parents, children, etc.)</div></div>
<div class="ttc" id="ap8est__connectivity_8h_html_a1374c4c2fc06e436e047d32c28b87288"><div class="ttname"><a href="p8est__connectivity_8h.html#a1374c4c2fc06e436e047d32c28b87288">p8est_connectivity_new_periodic</a></div><div class="ttdeci">p8est_connectivity_t * p8est_connectivity_new_periodic(void)</div><div class="ttdoc">Create a connectivity structure for an all-periodic unit cube.</div></div>
<div class="ttc" id="ap8est__connectivity_8h_html_a53bdb596e76c52c1e23aaecd0aacc763"><div class="ttname"><a href="p8est__connectivity_8h.html#a53bdb596e76c52c1e23aaecd0aacc763">p8est_connectivity_new_unitcube</a></div><div class="ttdeci">p8est_connectivity_t * p8est_connectivity_new_unitcube(void)</div><div class="ttdoc">Create a connectivity structure for the unit cube.</div></div>
<div class="ttc" id="ap8est__connectivity_8h_html_a71b16c2537992a3c1e4e51cb52ce76e4"><div class="ttname"><a href="p8est__connectivity_8h.html#a71b16c2537992a3c1e4e51cb52ce76e4">p8est_connectivity_new_twocubes</a></div><div class="ttdeci">p8est_connectivity_t * p8est_connectivity_new_twocubes(void)</div><div class="ttdoc">Create a connectivity structure that contains two cubes.</div></div>
<div class="ttc" id="ap8est__connectivity_8h_html_a9574e95e719a7cb31ce4c5a73bf3fa83"><div class="ttname"><a href="p8est__connectivity_8h.html#a9574e95e719a7cb31ce4c5a73bf3fa83">p8est_connectivity_new_rotwrap</a></div><div class="ttdeci">p8est_connectivity_t * p8est_connectivity_new_rotwrap(void)</div><div class="ttdoc">Create a connectivity structure for a mostly periodic unit cube.</div></div>
<div class="ttc" id="ap8est__connectivity_8h_html_ac88e4c055b8847d3c9074c17c624da6e"><div class="ttname"><a href="p8est__connectivity_8h.html#ac88e4c055b8847d3c9074c17c624da6e">p8est_connectivity_new_rotcubes</a></div><div class="ttdeci">p8est_connectivity_t * p8est_connectivity_new_rotcubes(void)</div><div class="ttdoc">Create a connectivity structure that contains a few cubes.</div></div>
<div class="ttc" id="ap8est__connectivity_8h_html_ae103ab738559fee854be2eba2f9cb4cd"><div class="ttname"><a href="p8est__connectivity_8h.html#ae103ab738559fee854be2eba2f9cb4cd">p8est_connectivity_new_brick</a></div><div class="ttdeci">p8est_connectivity_t * p8est_connectivity_new_brick(int m, int n, int p, int periodic_a, int periodic_b, int periodic_c)</div><div class="ttdoc">An m by n by p array with periodicity in x, y, and z if periodic_a, periodic_b, and periodic_c are tr...</div></div>
<div class="ttc" id="ap8est__vtk_8h_html"><div class="ttname"><a href="p8est__vtk_8h.html">p8est_vtk.h</a></div><div class="ttdoc">Routines for printing a forest and associated fields to VTK format.</div></div>
<div class="ttc" id="astructp4est__connectivity_html"><div class="ttname"><a href="structp4est__connectivity.html">p4est_connectivity</a></div><div class="ttdoc">This structure holds the 2D inter-tree connectivity information.</div><div class="ttdef"><b>Definition:</b> p4est_connectivity.h:190</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/>
</body>
</html>
